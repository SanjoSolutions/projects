{"version":3,"sources":["../src/apply.js"],"names":["run","main","getModuleName","url","includes","Error","process","argv","moduleName","modulePathUnderTest","path","resolve","__dirname","applyForFlatOffer","browser","puppeteer","launch","headless","defaultViewport","width","height","getBrowser","flatOffer","contactData","fn","then","console","log","error"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEAA,GAAG,CAACC,IAAD,CAAH;;AAEA,SAASC,aAAT,CAAwBC,GAAxB,EAA6B;AAC3B,MAAIA,GAAG,CAACC,QAAJ,CAAa,WAAb,CAAJ,EAA+B;AAC7B,WAAO,QAAP;AACD,GAFD,MAEO,IAAID,GAAG,CAACC,QAAJ,CAAa,SAAb,CAAJ,EAA6B;AAClC,WAAO,SAAP;AACD,GAFM,MAEA,IAAID,GAAG,CAACC,QAAJ,CAAa,QAAb,CAAJ,EAA4B;AACjC,WAAO,QAAP;AACD,GAFM,MAEA,IAAID,GAAG,CAACC,QAAJ,CAAa,SAAb,CAAJ,EAA6B;AAClC,WAAO,SAAP;AACD,GAFM,MAEA,IAAID,GAAG,CAACC,QAAJ,CAAa,cAAb,CAAJ,EAAkC;AACvC,WAAO,gBAAP;AACD,GAFM,MAEA,IAAID,GAAG,CAACC,QAAJ,CAAa,KAAb,CAAJ,EAAyB;AAC9B,WAAO,KAAP;AACD,GAFM,MAEA;AACL,UAAM,IAAIC,KAAJ,CAAW,gCAA+BF,GAAI,IAA9C,CAAN;AACD;AACF;;AAED,eAAeF,IAAf,GAAuB;AACrB,QAAME,GAAG,GAAGG,OAAO,CAACC,IAAR,CAAa,CAAb,CAAZ;AACA,QAAMC,UAAU,GAAGN,aAAa,CAACC,GAAD,CAAhC;AACA,QAAMM,mBAAmB,GAAGC,IAAI,CAACC,OAAL,CAC1BC,SAD0B,EAE1B,SAF0B,EAG1BJ,UAH0B,EAI1B,sBAJ0B,CAA5B;AAMA,QAAM;AAAEK,IAAAA;AAAF,MAAwB,yBAAaJ,mBAAb,kDAA9B;AAEA,QAAMK,OAAO,GAAG,MAAMC,SAAS,CAACC,MAAV,CAAiB;AACrCC,IAAAA,QAAQ,EAAE,KAD2B;AAErCC,IAAAA,eAAe,EAAE;AACfC,MAAAA,KAAK,EAAE,IADQ;AAEfC,MAAAA,MAAM,EAAE;AAFO;AAFoB,GAAjB,CAAtB;;AAQA,WAASC,UAAT,GAAuB;AACrB,WAAOP,OAAP;AACD;;AAED,QAAMQ,SAAS,GAAG;AAAEnB,IAAAA;AAAF,GAAlB;AACA,QAAMU,iBAAiB,CAACQ,UAAD,EAAaC,SAAb,EAAwBC,mBAAxB,CAAvB;AACA,QAAM,wCAA6BD,SAA7B,CAAN;AACD;;AAED,SAAStB,GAAT,CAAcwB,EAAd,EAAkB;AAChBA,EAAAA,EAAE,GAAGC,IAAL,CAAUC,OAAO,CAACC,GAAlB,EAAuBD,OAAO,CAACE,KAA/B;AACD","sourcesContent":["import path from 'path'\nimport puppeteer from 'puppeteer'\nimport { contactData } from './config.js'\nimport { registerFlatOfferAsAppliedTo } from './core.js'\n\nrun(main)\n\nfunction getModuleName (url) {\n  if (url.includes('immosuche')) {\n    return 'degewo'\n  } else if (url.includes('gesobau')) {\n    return 'gesobau'\n  } else if (url.includes('howoge')) {\n    return 'howoge'\n  } else if (url.includes('gewobag')) {\n    return 'gewobag'\n  } else if (url.includes('stadtundland')) {\n    return 'stadt_und_land'\n  } else if (url.includes('wbm')) {\n    return 'wbm'\n  } else {\n    throw new Error(`Unknown module name for url \"${url}\".`)\n  }\n}\n\nasync function main () {\n  const url = process.argv[2]\n  const moduleName = getModuleName(url)\n  const modulePathUnderTest = path.resolve(\n    __dirname,\n    'modules',\n    moduleName,\n    'applyForFlatOffer.js',\n  )\n  const { applyForFlatOffer } = await import(modulePathUnderTest)\n\n  const browser = await puppeteer.launch({\n    headless: false,\n    defaultViewport: {\n      width: 1024,\n      height: 768,\n    },\n  })\n\n  function getBrowser () {\n    return browser\n  }\n\n  const flatOffer = { url }\n  await applyForFlatOffer(getBrowser, flatOffer, contactData)\n  await registerFlatOfferAsAppliedTo(flatOffer)\n}\n\nfunction run (fn) {\n  fn().then(console.log, console.error)\n}\n"],"file":"apply.js"}