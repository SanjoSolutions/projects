{"version":3,"sources":["../../src/jest/setup.js"],"names":["spawn","require","path","fs","getWebServerPort","module","exports","webServerPort","global","__WEB_SERVER__","cwd","resolve","__dirname","logFile","createWriteStream","flags","stdout","pipe","stderr"],"mappings":";;AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAYC,OAAO,CAAC,eAAD,CAAzB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,MAAME,EAAE,GAAGF,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAM;AAAEG,EAAAA;AAAF,IAAuBH,OAAO,CAAC,oCAAD,CAApC;;AAEAI,MAAM,CAACC,OAAP,GAAiB,kBAAkB;AACjC,QAAMC,aAAa,GAAG,MAAMH,gBAAgB,EAA5C;AACAI,EAAAA,MAAM,CAACC,cAAP,GAAwBT,KAAK,CAC3B,SAD2B,EAE3B,CAAC,IAAD,EAAO,aAAP,EAAsBO,aAAtB,CAF2B,EAG3B;AACEG,IAAAA,GAAG,EAAER,IAAI,CAACS,OAAL,CAAaC,SAAb,EAAwB,IAAxB;AADP,GAH2B,CAA7B;AAOA,QAAMC,OAAO,GAAG,MAAMV,EAAE,CAACW,iBAAH,CAAqBZ,IAAI,CAACS,OAAL,CAAaC,SAAb,EAAwB,sBAAxB,CAArB,EAAsE;AAAEG,IAAAA,KAAK,EAAE;AAAT,GAAtE,CAAtB;;AACAP,EAAAA,MAAM,CAACC,cAAP,CAAsBO,MAAtB,CAA6BC,IAA7B,CAAkCJ,OAAlC;;AACAL,EAAAA,MAAM,CAACC,cAAP,CAAsBS,MAAtB,CAA6BD,IAA7B,CAAkCJ,OAAlC;AACD,CAZD","sourcesContent":["const { spawn } = require('child_process')\nconst path = require('path')\nconst fs = require('fs')\nconst { getWebServerPort } = require('../lib/testing/getWebServerPort.js')\n\nmodule.exports = async function () {\n  const webServerPort = await getWebServerPort()\n  global.__WEB_SERVER__ = spawn(\n    'python3',\n    ['-m', 'http.server', webServerPort],\n    {\n      cwd: path.resolve(__dirname, '..')\n    }\n  )\n  const logFile = await fs.createWriteStream(path.resolve(__dirname, '../../web_server.log'), { flags: 'w' })\n  global.__WEB_SERVER__.stdout.pipe(logFile)\n  global.__WEB_SERVER__.stderr.pipe(logFile)\n}\n"],"file":"setup.js"}