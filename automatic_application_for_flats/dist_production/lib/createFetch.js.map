{"version":3,"sources":["../../src/lib/createFetch.js"],"names":["createFetch","fetchOnce","fetch","getBrowser","intervalBetweenProcessRuns","onFlatOffer","shouldStop","page","newPage","close"],"mappings":";;;;;;;AAAA;;AAEO,SAASA,WAAT,CAAsB;AAC3BC,EAAAA;AAD2B,CAAtB,EAEJ;AACD,SAAO,eAAeC,KAAf,CAAsBC,UAAtB,EAAkCC,0BAAlC,EAA8DC,WAA9D,EAA2EC,UAA3E,EAAuF;AAC5F,UAAMC,IAAI,GAAG,MAAM,CAAC,MAAMJ,UAAU,EAAjB,EAAqBK,OAArB,EAAnB;;AAEA,WAAO,CAACF,UAAU,EAAlB,EAAsB;AACpB,YAAML,SAAS,CAACE,UAAD,EAAaI,IAAb,EAAmBF,WAAnB,CAAf;AACA,YAAM,gBAAKD,0BAAL,CAAN;AACD;;AAED,UAAMG,IAAI,CAACE,KAAL,EAAN;AACD,GATD;AAUD","sourcesContent":["import { wait } from './wait.js'\n\nexport function createFetch ({\n  fetchOnce\n}) {\n  return async function fetch (getBrowser, intervalBetweenProcessRuns, onFlatOffer, shouldStop) {\n    const page = await (await getBrowser()).newPage()\n\n    while (!shouldStop()) {\n      await fetchOnce(getBrowser, page, onFlatOffer)\n      await wait(intervalBetweenProcessRuns)\n    }\n\n    await page.close()\n  }\n}\n"],"file":"createFetch.js"}