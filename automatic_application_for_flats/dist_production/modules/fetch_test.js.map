{"version":3,"sources":["../../src/modules/fetch_test.js"],"names":["process","env","NODE_ENV","run","main","moduleNameUnderTest","argv","modulePathUnderTest","path","resolve","__dirname","fetchOnce","browser","puppeteer","launch","headless","defaultViewport","width","height","getBrowser","page","newPage","numberOfFlatOffers","onFlatOffer","flatOffer","console","log","fn","then","error"],"mappings":";;AAEA;;AACA;;;;;;AAHAA,OAAO,CAACC,GAAR,CAAYC,QAAZ,GAAuB,SAAvB;;;AAKAC,GAAG,CAACC,IAAD,CAAH;;AAEA,eAAeA,IAAf,GAAuB;AACrB,QAAMC,mBAAmB,GAAGL,OAAO,CAACM,IAAR,CAAa,CAAb,CAA5B;AACA,QAAMC,mBAAmB,GAAGC,IAAI,CAACC,OAAL,CAAaC,SAAb,EAAwBL,mBAAxB,EAA6C,UAA7C,CAA5B;AACA,QAAM;AAAEM,IAAAA;AAAF,MAAgB,yBAAaJ,mBAAb,kDAAtB;AAEA,QAAMK,OAAO,GAAG,MAAMC,SAAS,CAACC,MAAV,CAAiB;AACrCC,IAAAA,QAAQ,EAAE,KAD2B;AAErCC,IAAAA,eAAe,EAAE;AACfC,MAAAA,KAAK,EAAE,IADQ;AAEfC,MAAAA,MAAM,EAAE;AAFO;AAFoB,GAAjB,CAAtB;;AAQA,WAASC,UAAT,GAAsB;AACpB,WAAOP,OAAP;AACD;;AAED,QAAMQ,IAAI,GAAG,MAAMR,OAAO,CAACS,OAAR,EAAnB;AAEA,MAAIC,kBAAkB,GAAG,CAAzB;;AAEA,iBAAeC,WAAf,CAA4BC,SAA5B,EAAuC;AACrCC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,SAA5B;AACAF,IAAAA,kBAAkB;AACnB;;AAED,QAAMX,SAAS,CAACQ,UAAD,EAAaC,IAAb,EAAmBG,WAAnB,CAAf;AAEAE,EAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCJ,kBAAvC;AACD;;AAED,SAASnB,GAAT,CAAcwB,EAAd,EAAkB;AAChBA,EAAAA,EAAE,GAAGC,IAAL,CAAUH,OAAO,CAACC,GAAlB,EAAuBD,OAAO,CAACI,KAA/B;AACD","sourcesContent":["process.env.NODE_ENV = 'TESTING'\n\nimport path from 'path'\nimport puppeteer from 'puppeteer'\n\nrun(main)\n\nasync function main () {\n  const moduleNameUnderTest = process.argv[2]\n  const modulePathUnderTest = path.resolve(__dirname, moduleNameUnderTest, 'index.js')\n  const { fetchOnce } = await import(modulePathUnderTest)\n\n  const browser = await puppeteer.launch({\n    headless: false,\n    defaultViewport: {\n      width: 1024,\n      height: 768\n    }\n  })\n\n  function getBrowser() {\n    return browser\n  }\n\n  const page = await browser.newPage()\n\n  let numberOfFlatOffers = 0\n\n  async function onFlatOffer (flatOffer) {\n    console.log('Flat offer: ', flatOffer)\n    numberOfFlatOffers++\n  }\n\n  await fetchOnce(getBrowser, page, onFlatOffer)\n\n  console.log('Number of flat offers: ', numberOfFlatOffers)\n}\n\nfunction run (fn) {\n  fn().then(console.log, console.error)\n}\n"],"file":"fetch_test.js"}