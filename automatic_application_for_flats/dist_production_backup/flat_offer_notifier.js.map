{"version":3,"sources":["../src/flat_offer_notifier.js"],"names":["transporter","nodemailer","createTransport","service","auth","user","process","env","GMAIL_EMAIL","pass","GMAIL_PASSWORD","sendMail","util","promisify","bind","notify","flatOffer","contactData","mailOptions","from","to","email","subject","url","html"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;AAEA,MAAMA,WAAW,GAAGC,UAAU,CAACC,eAAX,CAA2B;AAC7CC,EAAAA,OAAO,EAAE,OADoC;AAE7CC,EAAAA,IAAI,EAAE;AACJC,IAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,WADd;AAEJC,IAAAA,IAAI,EAAEH,OAAO,CAACC,GAAR,CAAYG;AAFd;AAFuC,CAA3B,CAApB;AAQA,MAAMC,QAAQ,GAAGC,IAAI,CAACC,SAAL,CAAeb,WAAW,CAACW,QAAZ,CAAqBG,IAArB,CAA0Bd,WAA1B,CAAf,CAAjB;;AAEO,eAAee,MAAf,CAAuBC,SAAvB,EAAkCC,WAAlC,EAA+C;AACpD,QAAMC,WAAW,GAAG;AAClBC,IAAAA,IAAI,EAAEb,OAAO,CAACC,GAAR,CAAYC,WADA;AAElBY,IAAAA,EAAE,EAAEH,WAAW,CAACI,KAFE;AAGlBC,IAAAA,OAAO,EAAG,mBAAkBN,SAAS,CAACO,GAAI,GAHxB;AAIlBC,IAAAA,IAAI,EAAG,YAAWR,SAAS,CAACO,GAAI,KAAIP,SAAS,CAACO,GAAI;AAJhC,GAApB;AAOA,QAAMZ,QAAQ,CAACO,WAAD,CAAd;AACD","sourcesContent":["import util from 'util'\nimport nodemailer from 'nodemailer'\n\nconst transporter = nodemailer.createTransport({\n  service: 'gmail',\n  auth: {\n    user: process.env.GMAIL_EMAIL,\n    pass: process.env.GMAIL_PASSWORD\n  }\n})\n\nconst sendMail = util.promisify(transporter.sendMail.bind(transporter))\n\nexport async function notify (flatOffer, contactData) {\n  const mailOptions = {\n    from: process.env.GMAIL_EMAIL,\n    to: contactData.email,\n    subject: `New flat offer (${flatOffer.url})`,\n    html: `<a href=\"${flatOffer.url}\">${flatOffer.url}</a>`\n  }\n\n  await sendMail(mailOptions)\n}\n"],"file":"flat_offer_notifier.js"}