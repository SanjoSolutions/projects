{"version":3,"sources":["../../src/lib/createParseFlatOffer.js"],"names":["createParseFlatOffer","FlatOfferDetailPage","applyForFlatOffer","parseFlatOffer","getBrowser","flatOfferElement","url","getUrl","flatOfferPage","newPage","goto","page","flatOffer","flatOfferProperties","flatOfferProperty","getterName","toUpperCase","substring","value","__proto__","hasOwnProperty","apply","contactData","close"],"mappings":";;;;;;;AAAO,SAASA,oBAAT,CAA+B;AACpCC,EAAAA,mBADoC;AAEpCC,EAAAA;AAFoC,CAA/B,EAGJ;AACD,SAAO,eAAeC,cAAf,CAA+BC,UAA/B,EAA2CC,gBAA3C,EAA6D;AAClE,UAAMC,GAAG,GAAG,MAAMD,gBAAgB,CAACE,MAAjB,EAAlB;AAEA,UAAMC,aAAa,GAAG,MAAM,CAAC,MAAMJ,UAAU,EAAjB,EAAqBK,OAArB,EAA5B;AACA,UAAMD,aAAa,CAACE,IAAd,CAAmBJ,GAAnB,CAAN;AAEA,UAAMK,IAAI,GAAG,IAAIV,mBAAJ,CAAwBO,aAAxB,CAAb;AAEA,QAAII,SAAS,GAAG;AAAEN,MAAAA;AAAF,KAAhB;AACA,UAAMO,mBAAmB,GAAG,CAC1B,UAD0B,EAE1B,oBAF0B,EAG1B,oBAH0B,EAI1B,gBAJ0B,EAK1B,UAL0B,EAM1B,MAN0B,EAO1B,eAP0B,EAQ1B,aAR0B,EAS1B,oBAT0B,EAU1B,gBAV0B,CAA5B;;AAYA,SAAK,MAAMC,iBAAX,IAAgCD,mBAAhC,EAAqD;AACnD,YAAME,UAAU,GAAI,MAAKD,iBAAiB,CAAC,CAAD,CAAjB,CAAqBE,WAArB,KAAqCF,iBAAiB,CAACG,SAAlB,CAA4B,CAA5B,CAA+B,EAA7F;AACA,UAAIC,KAAJ;;AACA,UAAIb,gBAAgB,CAACc,SAAjB,CAA2BC,cAA3B,CAA0CL,UAA1C,KAAyD,OAAOV,gBAAgB,CAACU,UAAD,CAAvB,KAAwC,UAArG,EAAiH;AAC/GG,QAAAA,KAAK,GAAG,MAAMb,gBAAgB,CAACU,UAAD,CAAhB,EAAd;AACD,OAFD,MAEO,IAAIJ,IAAI,CAACQ,SAAL,CAAeC,cAAf,CAA8BL,UAA9B,KAA6C,OAAOJ,IAAI,CAACI,UAAD,CAAX,KAA4B,UAA7E,EAAyF;AAC9FG,QAAAA,KAAK,GAAG,MAAMP,IAAI,CAACI,UAAD,CAAJ,EAAd;AACD,OAFM,MAEA;AACLG,QAAAA,KAAK,GAAG,IAAR;AACD;;AACDN,MAAAA,SAAS,CAACE,iBAAD,CAAT,GAA+BI,KAA/B;AACD;;AACD,QAAIhB,iBAAJ,EAAuB;AACrBU,MAAAA,SAAS,CAACS,KAAV,GAAkB,eAAeA,KAAf,CAAsBjB,UAAtB,EAAkCkB,WAAlC,EAA+C;AAC/D,eAAO,MAAMpB,iBAAiB,CAACE,UAAD,EAAaQ,SAAb,EAAwBU,WAAxB,CAA9B;AACD,OAFD;AAGD;;AAED,UAAMd,aAAa,CAACe,KAAd,EAAN;AAEA,WAAOX,SAAP;AACD,GA1CD;AA2CD","sourcesContent":["export function createParseFlatOffer ({\n  FlatOfferDetailPage,\n  applyForFlatOffer\n}) {\n  return async function parseFlatOffer (getBrowser, flatOfferElement) {\n    const url = await flatOfferElement.getUrl()\n\n    const flatOfferPage = await (await getBrowser()).newPage()\n    await flatOfferPage.goto(url)\n\n    const page = new FlatOfferDetailPage(flatOfferPage)\n\n    let flatOffer = { url }\n    const flatOfferProperties = [\n      'coldRent',\n      'coldServiceCharges',\n      'warmServiceCharges',\n      'serviceCharges',\n      'warmRent',\n      'area',\n      'numberOfRooms',\n      'seniorsOnly',\n      'requiredMinimumAge',\n      'selfRenovation'\n    ]\n    for (const flatOfferProperty of flatOfferProperties) {\n      const getterName = `get${flatOfferProperty[0].toUpperCase() + flatOfferProperty.substring(1)}`\n      let value\n      if (flatOfferElement.__proto__.hasOwnProperty(getterName) && typeof flatOfferElement[getterName] === 'function') {\n        value = await flatOfferElement[getterName]()\n      } else if (page.__proto__.hasOwnProperty(getterName) && typeof page[getterName] === 'function') {\n        value = await page[getterName]()\n      } else {\n        value = null\n      }\n      flatOffer[flatOfferProperty] = value\n    }\n    if (applyForFlatOffer) {\n      flatOffer.apply = async function apply (getBrowser, contactData) {\n        return await applyForFlatOffer(getBrowser, flatOffer, contactData)\n      }\n    }\n\n    await flatOfferPage.close()\n\n    return flatOffer\n  }\n}\n"],"file":"createParseFlatOffer.js"}