{"version":3,"sources":["../../../src/modules/howoge/HOWOGEFlatOfferDetailPage.js"],"names":["HOWOGEFlatOfferDetailPage","FlatOfferDetailPage","getCosts","costs","costsDataRows","page","$$","Promise","all","map","costsDataRow","keyElement","$","key","evaluate","node","innerHTML","valueElement","value","innerText","getCost","keyToFind","find","getKeyFigures","keyFigures","keyFiguresRows","keyFiguresRow","getKeyFigure","getColdRent","coldRentText","getServiceCharges","serviceChargesText","getWarmRent","warmRent","getArea","areaText","getNumberOfRooms","numberOfRoomsText","getTitle","titleElement","getSeniorsOnly"],"mappings":"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","sourcesContent":["import { FlatOfferDetailPage } from '../../lib/FlatOfferDetailPage.js'\nimport { isTitleOfSeniorsOnlyFlat } from '../../lib/isTitleOfSeniorsOnlyFlat.js'\nimport { parseCurrencyText } from '../../lib/parseCurrencyText.js'\nimport { parseFloatNumberText } from '../../lib/parseFloatNumberText.js'\nimport { parseNumberOfRooms } from '../../lib/parseNumberOfRooms.js'\n\nexport class HOWOGEFlatOfferDetailPage extends FlatOfferDetailPage {\n  async getCosts () {\n    if (!this.costs) {\n      const costsDataRows = await this.page.$$('.expenses .wrap > div')\n      this.costs = await Promise.all(costsDataRows.map(async costsDataRow => {\n        const keyElement = await costsDataRow.$('p')\n        const key = await keyElement.evaluate(node => node.innerHTML)\n        const valueElement = await costsDataRow.$('div')\n        const value = await valueElement.evaluate(node => node.innerText)\n        return [key, value]\n      }))\n    }\n\n    return this.costs\n  }\n\n  async getCost (keyToFind) {\n    return (await this.getCosts()).find(([key]) => key === keyToFind)\n  }\n\n  async getKeyFigures () {\n    if (!this.keyFigures) {\n      const keyFiguresRows = await this.page.$$('.expose-facts .details tr')\n      this.keyFigures = await Promise.all(keyFiguresRows.map(async keyFiguresRow => {\n        const keyElement = await keyFiguresRow.$('th')\n        const key = await keyElement.evaluate(node => node.innerHTML)\n        const valueElement = await keyFiguresRow.$('td')\n        const value = await valueElement.evaluate(node => node.innerText)\n        return [key, value]\n      }))\n    }\n\n    return this.keyFigures\n  }\n\n  async getKeyFigure (keyToFind) {\n    return (await this.getKeyFigures()).find(([key]) => key === keyToFind)\n  }\n\n  async getColdRent () {\n    const coldRentText = (await this.getCost('Kaltmiete'))[1]\n    return parseCurrencyText(coldRentText)\n  }\n\n  async getServiceCharges () {\n    const serviceChargesText = (await this.getCost('Nebenkosten'))[1]\n    return parseCurrencyText(serviceChargesText)\n  }\n\n  async getWarmRent () {\n    const warmRent = await this.getCost('Warmmiete')\n    return parseCurrencyText(warmRent[1])\n  }\n\n  async getArea () {\n    const areaText = (await this.getKeyFigure('WohnflÃ¤che'))[1]\n    return parseFloatNumberText(areaText)\n  }\n\n  async getNumberOfRooms () {\n    const numberOfRoomsText = (await this.getKeyFigure('Zimmer'))[1]\n    return parseNumberOfRooms(numberOfRoomsText)\n  }\n\n  async getTitle () {\n    const titleElement = (await this.page.$$('.expose-head .h1'))[1]\n    return await titleElement.evaluate(node => node.innerText)\n  }\n\n  async getSeniorsOnly () {\n    return isTitleOfSeniorsOnlyFlat(await this.getTitle())\n  }\n}\n"],"file":"HOWOGEFlatOfferDetailPage.js"}